# 关键帧

https://www.100ms.live/blog/key-frame


## 定义

在视频流中，关键帧或 I 帧（内编码帧 Intra-coded frame）是一个包含场景完整画面的独立帧，与 P 帧和 B 帧不同，后者引用其他帧。它作为新观众的起始点，并允许视频中的随机访问，如搜索和快进。关键帧对于视频压缩和高效流式传输至关重要，因为它们减少了与前一个帧的依赖性，确保即使在数据包丢失或网络波动的情况下，视频流也能保持完整。

## 它究竟意味着什么？

将视频流中的关键帧想象成一本书的章节开始。就像章节开始提供了进入故事的新入口点而无需了解之前的细节一样，关键帧包含了整个图像数据，允许观众从该点开始观看，而无需看到之前的帧。

关键帧，就像章节中的页面一样，故事（或视频）通过建立已经确立的内容来推进。如果你翻开一本书到章节的开始，可以立即理解场景或背景，就像关键帧可以独立于之前的内容提供完整的画面。

## 视频压缩中的帧类型

在关键帧之间，还有其他类型的帧——P 帧（预测帧 Predicted frames）和 B 帧（双向帧 Bi-directional frames）。P 帧仅存储与前一个帧（或另一个参考帧）之间的变化，而不是整个图像。B 帧更加高效，因为它们参考了前一个和后一个帧的数据。这种帧的层次结构通过仅编码帧之间的差异，而不是每个帧的完整内容，从而减少了表示视频所需的数据量。

## 编码和流式传输过程

在编码过程中，编码器决定将这些关键帧放置在哪里。这种放置可以基于固定间隔（例如，每秒一次）或根据视频内容（例如，在场景开始时放置关键帧）。放置方式对视频的大小和质量有重大影响。频繁的关键帧可以提高从任意点查找和开始播放的能力，但会增加文件大小。相反，较少的关键帧可以减少文件大小，但可能会使查找不够精确，并在场景变化后降低质量。

## 流媒体传输最佳关键帧间隔是什么？

最佳关键帧间隔取决于内容和应用，但一般建议将关键帧间隔设置为 2 到 5 秒。对于节奏快或动态性高的内容，较短的间隔可以保持质量，而对于更静态的内容，较长的间隔可能更高效。在确定最佳间隔时，平衡质量、文件大小和随机访问需求至关重要。

## 关键帧间隔是多少，对于 30fps？

对于每秒 30 帧（fps）的视频，常见的关键帧间隔为 60 至 150 帧，相当于 2 至 5 秒的间隔。这个间隔符合一般的流媒体指南，并优化了视频质量和压缩效率。